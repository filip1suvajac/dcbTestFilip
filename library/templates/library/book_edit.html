{% extends "library/dashboard_base.html" %}
{% block content %}

<div class="breadcrumbs text-sm pl-8 pt-7">
  <ul>
    <li>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        class="h-4 w-4 mr-2 stroke-current"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
        ></path>
      </svg>
      Home
    </li>
    <li>
      <a href="/books">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="h-4 w-4 stroke-current"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
          />
        </svg>
        Books
      </a>
    </li>
    <li>
      <a href="/books">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="h-4 w-4 stroke-current"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
          />
        </svg>
        {{book.name}}
      </a>
    </li>
  </ul>
</div>

<div class="ml-8 mt-6 max-w-[90%] bg-base-100 rounded-box p-8">
  <h1 class="text-2xl font-semibold mb-4">Edit: {{ book.name }}</h1>

  <form method="POST" class="space-y-4">
    {% csrf_token %}

    <input class="input input-bordered w-full" name="name" value="{{ book.name }}" />
    <input class="input input-bordered w-full" name="author" value="{{ book.author }}" />

    <input class="input input-bordered w-full" type="number" name="year" value="{{ book.year }}" />

    <select class="select select-bordered w-full" name="category_id">
      {% for c in categories %}
        <option value="{{ c.id }}" {% if c.id == book.category_id %}selected{% endif %}>
          {{ c.name }}
        </option>
      {% endfor %}
    </select>

    <input class="input input-bordered w-full" type="number" min="1" max="10"
           name="rating" value="{{ book.rating|default:'' }}" placeholder="Rating (1-10, optional)" />

    <textarea class="textarea textarea-bordered w-full" name="desc">{{ book.desc }}</textarea>

    <div class="flex gap-2 justify-end">
      <a class="btn" href="{% url 'book_detail' book.pk %}">Cancel</a>
      <button class="btn btn-primary" type="submit">Save</button>
    </div>
  </form>
</div>

{% endblock %}
