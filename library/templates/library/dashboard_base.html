{% load static %}

<!DOCTYPE html>
<html lang="sl" data-theme="mylight">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
      defer
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="icon" href="{% static 'library/logo.png' %}" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="{% static 'library/styles.css' %}" />

    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@5"
      rel="stylesheet"
      type="text/css"
    />
  </head>

  <body>
    <div class="drawer lg:drawer-open min-h-screen">
      <input id="main-drawer" type="checkbox" class="drawer-toggle" />

      <div class="drawer-content">
        <div class="flex min-h-screen">
          <aside
            class="hidden lg:flex w-48 h-screen text-textCol flex flex-col gap-12 pt-10 px-3 border-r border-base-300"
          >
            <div class="text-center mb-4">
              <img
                src="{% static 'library/logo.png' %}"
                alt="Logo"
                class="h-32 mx-auto"
              />
            </div>

            <nav>
              <ul class="flex flex-col gap-3">
                <li>
                  <a
                    href="{% url 'books_list' %}"
                    class="flex items-center gap-3 px-6 py-4 rounded transition-all text-md hover:text-primary duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'books_list' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="{% if request.resolver_match.url_name == 'books_list' %}1.8{% else %}1.2{% endif %}"
                      stroke="currentColor"
                      class="size-6 {% if request.resolver_match.url_name == 'books_list' %}text-primary{% else %}text-base-600{% endif %}"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
                      />
                    </svg>

                    <span>Books</span>
                  </a>
                </li>

                <li>
                  <a
                    href="{% url 'categories_list' %}"
                    class="flex items-center gap-3 px-6 py-4 rounded transition-all text-md hover:text-primary duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'categories_list' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="{% if request.resolver_match.url_name == 'categories_list' %}1.8{% else %}1.2{% endif %}"
                      stroke="currentColor"
                      class="size-6 {% if request.resolver_match.url_name == 'categories_list' %}text-primary{% else %}text-base-600{% endif %}"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"
                      />
                    </svg>

                    <span>Categories</span>
                  </a>
                </li>

                <li>
                  <a
                    href="{% url 'mybooks' %}"
                    class="flex items-center gap-3 px-6 py-4 rounded text-md hover:text-primary transition-all duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'mybooks' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="{% if request.resolver_match.url_name == 'mybooks' %}1.8{% else %}1.2{% endif %}"
                      stroke="currentColor"
                      class="size-6 {% if request.resolver_match.url_name == 'mybooks' %}text-primary{% else %}text-base-600{% endif %}"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
                      />
                    </svg>

                    <span>My Books</span>
                  </a>
                </li>
              </ul>
            </nav>
          </aside>

          <div class="flex flex-col w-full">
            <div
              class="navbar justify-between border-b border-base-300 z-40 px-2 sm:px-4"
            >
              <label
                for="main-drawer"
                class="btn btn-ghost btn-sm sm:btn-md lg:hidden ml-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 6h16M4 12h16M4 18h16"
                  />
                </svg>
              </label>

              <label
                class="toggle ml-3 toggle-md sm:toggle-lg text-base-content"
              >
                <input type="checkbox" id="theme-toggle" />
                <svg
                  aria-label="enabled"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="size-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
                  />
                </svg>

                <svg
                  aria-label="disabled"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="size-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"
                  />
                </svg>
              </label>
              <h1
                class="text-base sm:text-lg lg:text-xl pr-2 sm:pr-6 text-textCol font-medium hidden sm:block"
              >
                mojaDigitalnaKnji≈ænica
              </h1>
              <button
                class="btn btn-outline btn-error btn-sm sm:btn-md mr-2"
                for="logout-modal"
                onclick="my_modal_1.showModal()"
              >
                Logout
              </button>

              <dialog id="my_modal_1" class="modal">
                <div class="modal-box">
                  <h3 class="text-lg text-textCol font-bold">Attention!</h3>
                  <p class="py-4 text-textCol">
                    Are you sure you want to logout?
                  </p>
                  <div class="flex justify-end gap-2 items-center mr-5">
                    <form method="POST" action="{% url 'logout' %}">
                      {% csrf_token %}
                      <button type="submit" class="btn btn-error" type="submit">
                        Logout
                      </button>
                    </form>

                    <div class="modal-action m-0">
                      <form method="dialog">
                        <button class="btn">Close</button>
                      </form>
                    </div>
                  </div>
                </div>
              </dialog>
            </div>
            <main class="flex-1 bg-base-200 overflow-hidden">
              {% block content %}{% endblock %}
            </main>
          </div>
        </div>

        <script>
          const key = "theme";
          const html = document.documentElement;
          const toggle = document.getElementById("theme-toggle");

          const saved = localStorage.getItem(key);
          const initial = saved || html.getAttribute("data-theme") || "light";
          html.setAttribute("data-theme", initial);

          if (toggle) toggle.checked = (initial === "dark" || initial === "night");

          toggle?.addEventListener("change", () => {
            const next = toggle.checked ? "dark" : "light";
            html.setAttribute("data-theme", next);
            localStorage.setItem(key, next);
          });
        </script>

        {% block extra_js %}{% endblock %}
      </div>

      <div class="drawer-side lg:hidden z-50">
        <label for="main-drawer" class="drawer-overlay"></label>

        <aside
          class="w-64 min-h-full text-textCol flex flex-col gap-12 pt-10 px-3 border-r border-base-300 bg-base-100"
        >
          <div class="text-center mb-4">
            <img
              src="{% static 'library/logo.png' %}"
              alt="Logo"
              class="h-32 mx-auto"
            />
          </div>

          <nav>
            <ul class="flex flex-col gap-3">
              <li>
                <a
                  href="{% url 'books_list' %}"
                  onclick="document.getElementById('main-drawer').checked=false"
                  class="flex items-center gap-3 px-6 py-4 rounded transition-all text-md hover:text-primary duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'books_list' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="{% if request.resolver_match.url_name == 'books_list' %}1.8{% else %}1.2{% endif %}"
                    stroke="currentColor"
                    class="size-6 {% if request.resolver_match.url_name == 'books_list' %}text-primary{% else %}text-base-600{% endif %}"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
                    />
                  </svg>

                  <span>Books</span>
                </a>
              </li>

              <li>
                <a
                  href="{% url 'categories_list' %}"
                  onclick="document.getElementById('main-drawer').checked=false"
                  class="flex items-center gap-3 px-6 py-4 rounded transition-all text-md hover:text-primary duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'categories_list' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="{% if request.resolver_match.url_name == 'categories_list' %}1.8{% else %}1.2{% endif %}"
                    stroke="currentColor"
                    class="size-6 {% if request.resolver_match.url_name == 'categories_list' %}text-primary{% else %}text-base-600{% endif %}"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0-.515.045-.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"
                    />
                  </svg>

                  <span>Categories</span>
                </a>
              </li>

              <li>
                <a
                  href="{% url 'mybooks' %}"
                  onclick="document.getElementById('main-drawer').checked=false"
                  class="flex items-center gap-3 px-6 py-4 rounded text-md hover:text-primary transition-all duration-300 hover:bg-base-50
           {% if request.resolver_match.url_name == 'mybooks' %}bg-base-200 text-textCol{% else %}text-base-600{% endif %}"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="{% if request.resolver_match.url_name == 'mybooks' %}1.8{% else %}1.2{% endif %}"
                    stroke="currentColor"
                    class="size-6 {% if request.resolver_match.url_name == 'mybooks' %}text-primary{% else %}text-base-600{% endif %}"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
                    />
                  </svg>

                  <span>My Books</span>
                </a>
              </li>
            </ul>
          </nav>
        </aside>
      </div>
    </div>
  </body>
</html>
